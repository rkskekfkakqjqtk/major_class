### 계층적 모듈 구조
모듈화
- H/W: CPU, 메모리, HDD, LAN 카드 등의 각 단위 모듈로 구성되어 고장이나 업그레이드 상황에 쉽게 대처 할 수 있음(L1)
- S/W: 함수별로 특정 기능을 독립적으로 수행하도록 추상화시키면, 내부 구조를 이해하지 않더라도 전체 시스템을 쉽게 이해할 수 있음(L2 ~ )

모듈화의 예시
- B 모듈이 오류가 있어서 고치거나, 기능 개선을 하더라도 A와 C 모듈 간의 **인터페이스에는 영향을 주지 않음**
![[2장. 네트워크 개념-20240425022645036.webp|400]]

---
### 계층 구조의 이해
- 서비스, 인터페이스 및 프로토콜
	- 자동차 감속 서비스: 운전자 (상위 계층), **브레이크 (인터페이스)**, 감속 기능 (하부 계층)
![[2장. 네트워크 개념-20240425022746857.webp|450]]

---
### 모듈화된 계층구조 프로토콜의 장점
- 복잡하고 큰 시스템을 **간단하고 작은 시스템으로 재구성**할 수 있음 → 설계 및 구현이 용이
- 모듈 인터페이스를 단순하게 구현하여 **독립성을 보장**함 → 시스템 구조를 단순화함
- 좌우 **대칭 구조**인 프로토콜을 단순화할 수 있음
- 각 계층의 기능 오류를 수정할 때 상/하 계층 간의 **인터페이스는 유지하면서 모듈을 수정 가능하기 때문에 다른 모듈에 영향을 주지 않음**
---
### 프로토콜 설계 시 고려사항
주소 표현
- 전화번호 체계: 국가 코드 – 지역 코드 – 번호
- 주민등록번호: XXXXXX – X
- 브로드캐스팅<sup>Broadcasting</sup>: 모든 호스트로 데이터 전송
- 멀티캐스팅<sup>Multicasting</sup>: 특정 사용자 그룹으로 데이터 전송

오류 제어
- L1 계층의 전송 매체에 의한 오류를 L2 계층에서 **전송 오류**를 해결
- **재전송기능을 통한 오류 복구 수행**

오류 제어의 유형
-  데이터 분실 오류: 수신 호스트가 인지하는 것이 어렵기 때문에 **타임아웃<sup>Timeout</sup> 기능으로 오류를 감지**함
- 데이터 변형 오류: **수신 호스트가 CRC<sup>Cyclic Redundancy Check</sup> 방식의 오류 검출 기법**을 이용해서 오류를 인지하고 송신 호스트가 데이터를 재전송<sup>Retransmission</sup>함
![[2장. 네트워크 개념-20240425023308453.webp|450]]

---
##### 흐름 제어
- 수신 호스트의 **버퍼**에 저장된 데이터를 미처 처리 하지 못한 상태에서 데이터가 들어오면 분실됨
- 이런 문제를 해결하기 위한 송신 호스트의 전송 속도를 조절하는 기능
- 실제 통신 환경에서는 **전송 속도가 너무 느려서** 사용하지 않음
- 송신측에서 **동시에 여러 개를 전송**하고 수신측에서 **받을 수 있는 개수를 통제**함
![[2장. 네트워크 개념-20240425023413407.webp|400]]

---
### 데이터 전송 방식
- 전이중 : **양쪽에서 동시에 데이터를 전송**하는 방식
- 반이중 : 특정 시점에서는 한 방향으로만 데이터를 전송하는 방식
- 단방향 : 오른쪽이나 왼쪽으로 한 방향으로만 전송하는 방식
![[2장. 네트워크 개념-20240425023506358.webp|450]]

---
### 서비스 프리미티브
- 인접한 두 계층간의 인터페이스를 표시하는 방법
- 연결형 서비스
	- **수행 동작 : 연결 설정 → 데이터 전송 → 연결 해제**
	- 음성 통화와 유사
- 비연결형 서비스
	- **목적지 호스트로 단지 전송**함
	- 우편 시스템과 유사
---
##### 프리미티브의 기능과 4단계 동작 원리
- 클라이언트 송수신: Request Indication
- 서버 송수신: Response Confirm

##### 서비스 프리미티브의 기능

| 기능         | 설명                     |
| ---------- | ---------------------- |
| Request    | 클라이언트가 서버에 서비스를 요청함    |
| Indication | 서버에 서비스 요청이 도착했음을 통지함  |
| Response   | 서버가 클라이언트에 서비스 응답을 회신함 |
| Confirm    | 클라이언트에 응답이 도착했음을 통지함   |
![[2장. 네트워크 개념-20240425023850718.webp|450]]
- 전화 시스템의 4단계 동작 방식
	- Request: 발신자가 전화번호를 누름
	- Indication: 수신자의 전화 벨이 울림
	- Response: 수신자가 전화를 받기 위해 통화 버튼을 누름
	- Confirm: 발신자 전화기의 발신음이 **끊기면서** 통화 시작 (연결 상태)
##### Request
- 클라이언트가 서버에 프리미티브의 기능을 수행하도록 L1 계층을 통해 요청함
- 연결 설정 요청
- 데이터 전송 요청
- 연결 해제 요청
##### Indication
- 클라이언트의 요청에 대해 서버가 프리미티브의 기능을 수행하도록 상위 계층으로 요청함
- 연결 설정
- 데이터 전송
- 연결 해제
##### Response
- 서버가 클라이언트에게 프리미티브의 기능을 통해 응답함
- 연결 설정 요청CONNECT.Response
- 데이터DATA.Response
- 연결 해제DISCONNECT.Response
##### Confirm
- 서버가 클라이언트에게 프리미티브의 기능을 통해 확정함
- 연결 설정 요청
- 데이터
- 연결 해제
---
### 헤더<sup>Header</sup> 정보
각 Layer의 프로토콜을 통해 데이터를 **신뢰성 있게 전송하기 위한 부가 정보**
- 예시로, L3 헤더: 출발지/목적지 주소, 상위 프로토콜 종류, 오류 제어 (예, Checksum - 에러 검출), 흐름 제어 등의 정보를 가짐
- **오버헤드**라고도 불림
- 하위 계층으로 내려가면서 헤더가 추가
- 상위 계층으로 올라가면서 헤더가 제거
- L1 헤더는 없음
- 페이로드 : 헤더를 제외한 실제 데이터
![[2장. 네트워크 개념-20240425024303671.webp|450]]

---
### 라우터<sup>Router</sup> 의 중개 기능
라우팅 : 데이터가 목적지까지 잘 전달되도록 경로 배정 기능
- 라우팅을 표시한 OSI 7 계층 모델
- 각 라우터에서 헤더 정보를 해석한 후 수정함
- 라우터 양단의 네트워크 정보가 다를 수도 있음
![[2장. 네트워크 개념-20240425024420188.webp|450]]

---
##### 계층별 기능
물리 계층 (L1)
- 전송 매체의 물리적 인터페이스에 관한 사항(데이터의 전송 속도, 송수신 호스트의 클럭 동기화 방법, 물리적 연결 형태 등)을 다룸
- L1 프로토콜은 H/W로 구현됨(반면, L2 이상의 프로토콜은 S/W로 구현됨)

데이터 링크 계층 (L2)
- 전송 데이터의 물리적 전송 오류를 해결함
- 전송 경로를 선택할 수 없기 때문에 호스트 간 일대일 경로에서만 데이터 전송을 지원
- 흐름 제어기능 지원, 헤더 속에 MAC 주소를 가짐
- 프레임<sup>Frame</sup> : L2에서 전송되는 데이터

네트워크 계층 (L3)
- 송신 호스트에서 전송한 데이터가 수신 호스트로 전달하기 위한 라우팅 문제를 처리함
- L3의 IP주소와 L2의 MAC주소를 모두 갖음
- 혼잡제어 기능 지원 (독립적인 패킷이 많으면 네트워크 속도에 영향을 받음)
- 패킷 : L3에서 전송되는 데이터

전송 계층 (L4)
- **송신 프로세스와 수신 프로세스를 직접 연결하는 단대단 통신 기능을 제공**
- **H/W 성향의 하위 3 계층과 S/W 성향의 상위 3계층의 중간 성격으로 논리적 통신을 구성**
- 프로세스 간 통신 이라고 함
- 포트 : **상위 계층** 응용 프로세스의 식별 수단

세션 계층 (L5)
- **양 종단 간의 일회성 논리적 연결**을 제공
- 양 호스트 간 통신 중 끊어지지 않도록 **연결을 유지**
- 대화 유지를 위해 토큰을 사용, 일시적 전송 장애를 해소하기 위해 동기점 관리

표현 계층 (L6)
- 통신 양단에서 서로 이해할 수 있는 보안, 압축과 같은 인코딩 기능(코딩 이라고 함)을 제공
- SSL 프로토콜에서 암호화/복호화 처리
- 데이터 포멧(예, UTF-8)에 따른 인코딩, 디코딩
- 영상 정보와 같은 대용량 데이터의 압축 및 해제 처리

응용 계층 (L7)
- 네트워크 통신을 이용한 데이터 송/수신의 최종단
- 대표적인 예 : HTTP, **HTTPS**, FTP, Telnet 및 메일 서비스
---
### 구현 환경
시스템 공간
- OS 커널 내부에 구현 : L4 TCP/UDP 프로토콜 (소켓 인터페이스를 이용하여 호출 할 수 있음), L3의 IP 프로토콜, L2의 LAN 카드 & 드라이버 루틴

사용자 공간
- L5 ~ L7까지 네트워크 응용 기능을 지원하는 프로그램 작성
- 포트 번호 : 특정 호스트에서 실행되는 네트워크 프로세스를 구분하는 주소
- 포트 번호와 네트워크 프로세스는 1:1 대응
- 인터넷 응용 프로세스의 고유 주소 : IP주소 + 포트 번호 조합
![[2장. 네트워크 개념-20240425025154445.webp|300]]

---
### 프로토콜
L3 프로토콜 계층 구조
- ICMP<sup>Internet Control Message Protocol</sup>: IP 패킷 전달 오류 보고, 대표적인 예로써 **Ping, tracert (traceroute)**, L3 프로토콜인데, IP 패킷에 캡슐화되어 전송됨
- ARP<sup>Address Resolution Protocol</sup>/RARP<sup>Reverse ARP</sup>: IP MAC/ MAC IP 변환하는 프로토콜
![[2장. 네트워크 개념-20240425025318077.webp|350]]

---
##### ARP, RARP 및 ICMP의 특징
| 프로토콜 | 특징                                                                                                                                                                                 |
| ---- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ARP  | 인터넷에서 통신하려면 자신의 로컬 IP 주소와 MAC 주소, 수신 호스트의 IP주소와 MAC 주소가 필요하다. ARP는 수신호스트의 주소 변환 기능을 제공하는데, 사용자가 입력한 **원격 IP주소를 이용해 원격 MAC주소를 제공하는 프로토콜**이다.                                        |
| RARP | RARP는 로컬 호스트의 주소 변환 기능을 제공하는데, **LAN 카드에 보관된 MAC 주소를 이용해 자신의 IP 주소를 얻어내는 프로토콜**이다. 일반 컴퓨터 시스템은 로컬 호스트의 IP 주소가 파일 스스템에 보관되므로 RARP를 사용하지 않지만, 파일 시스템이 존재하는 시스템에서는 RARP를 반드시 사용해야 한다. |
| ICMP | **사용자 데이터의 전송 과정에서 오류가 발생하면 오류 메세지가 생성**된다. ICMP는 이 오류 메세지를 **송신 호스트에 전송하는 기능을 담당하는 프로토콜**이다.                                                                                      |







