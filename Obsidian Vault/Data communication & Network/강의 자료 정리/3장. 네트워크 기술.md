### 라우팅 시스템의 역사
데이터를 최종 목적지까지 올바른 경로로 중개하는 교환기능을 제공
- 교환기: 음성 전화 서비스의 교환 기능을 제공하는 시스템
- 공중 교환 전화망: 유선 전화가 국내/외로 서비스되로록 연결하는 네트워크
- 회선 교환: 전화망에서 고정 대역으로 음성을 교환함
- 프레임 릴레이: 패킷 교환으로 진화 과정의 기술로 LAN, WAN에서의 데이터 전송 기술 → IP-VPN으로 진화
- 패킷 교환Packet Switching: 가변 대역으로 데이터를 교환함
![[3장. 네트워크 기술-20240425033321842.webp|300]]

---
### 패킷 교환 시스템
- 패킷 단위로 나누어 전송하며 패킷 기반 라우팅을 함
- 가변 크기의 전송률을 지원함 // 반면에, 회선 교환은 고정 대역 전송을 지원하여 안정적 속도를 보장하지만 대역이 낭비됨
- 데이터그램 : 비연결형 서비스 기반의 독립적인 패킷 자체를 말함(순서와 무관하게 전송됨)
- 가상 회선 : 연결형 서비스 기반의 L4 상 종단간 연결 (Session 레벨)
- 가변 대역폭 사용 : 인터넷 이용 속도가 일정하지 않음, 네트워크 사용량이 많아지면 전송 속도가 느려짐
---
### 라우팅 시스템
회선 교환 방식
- 데이터를 주고받으려면 교환기의 중개가 필요
- 교환기와 전송 선로를 공유함
- 네트워크 혼잡도에 따라 전송 경로가 결정됨
![[3장. 네트워크 기술-20240425033607228.webp|400]]
- 데이터를 전송하기 전에 연결 경로를 미리 설정하는 방식
- 고정 대역의 논리적 전송 선로를 할당 받음
- 안정적 데이터 전송률을 지원
![[3장. 네트워크 기술-20240425033641126.webp|400]]

---
### 메시지 교환 방식
- 전송하는 메시지의 헤더 마다 목적지의 주소를 표시하는 방식
- 데이터 전송이 교환기 단위로 이루어짐
- 이전 교환기에서 보낸 전체 메시지가 도착할 때까지 중간 교환기는 메시지를 일시적으로 버퍼에 저장함
- 축적 교환 방식 : 축적 단위가 메시지 전체임
- 반면에, 패킷 교환은 축적 단위가 긴 메시지를 분할한 패킷임
---
### 패킷 교환 방식
- 각 패킷이 독립적인 라우팅을 거쳐 수신 호스트에 도착함
---
##### 패킷 교환 방식의 장점
- **전송 대역의 효율적 이용** : 여러 호스트로부터 전송한 패킷들이 동적 방식으로 전송 대역을 공유하기 때문
- **호스트의 무제한 수용** : 전송 대역이 부족해 연결 설정 요청을 수용하지 못하는 경우는 존재하지 않음
- **패킷에 우선순위 부여** : 전송 단위가 패킷 단위라서 우선순위를 부여하기 용이함
##### 패킷 교환 방식의 단점
- 전송 패킷을 라우터 내부 버퍼에 보관에서 발생
- 여러 종류의 대기 큐에서 가변 지연 발생
- 패킷 독립적인 경로로 전달되기 때문에 패킷 마다 가변 지연일 발생(마지막 도달 패킷의 지연시간에 영향)
- **지터**: 패킷 전송 간격이 일정하지 않아 패킷 지연이 수시로 발생하는 현상
---
### 패킷 교환의 데이터 전송 방식
##### 가상 회선
- 연결형 서비스를 지원하기 위한 기능
- 미리 설정된 논리적인 연결을 통해 모든 패킷의 전송 경로가 동일함(하나의 파이프라인으로 전송)
- 파이프라인 : 한 단계의 출력 결과물이 다음 단계의 입력으로 사용되는 일련의 데이터 처리 구조
- 패킷 순서가 뒤바뀌지 않음
![[3장. 네트워크 기술-20240425034118622.webp|450]]
##### 데이터그램
- 비연결형 서비스를 지원하기 위한 기능
- 전송한 패킷이 독립적으로 라우팅됨
- 패킷 순번이 출발 순서와 도착 순서가 다를 수 있음
- 개별 패킷의 라우팅 경로도 다를 수 있음
- 수신 호스트에서 순서를 바로 잡는 기능이 필요함
![[3장. 네트워크 기술-20240425034216419.webp|450]]
##### 프레임 릴레이
- WAN 디지털 통신 과정에서 상당한 전송 오류가 발생했음
- 중개하는 교환 시스템에서 전송 오류를 검색하고 복구하는 기능이 복잡함
- 동일한 전송 속도의 전송 매체로 고속 데이터 전송을 지원하는 기술임
- 홉 단위의 흐름 제어나 오류 제어 기능을 수행하지 않음(L2 계층의 기능을 단순화 함)
![[3장. 네트워크 기술-20240425034319543.webp|450]]

---
### 컴퓨터 내부와 컴퓨터 네트워크의 비교
가장 소규모 네트워크 : 컴퓨터 내부

|       | 컴퓨터 내부    | 컴퓨터 네트워크      |
| ----- | --------- | ------------- |
| 구성품   | 프로세서      | 호스트와 라우터      |
| 네트워크  | 다중 처리 시스템 | 인터넷           |
| 지연    | 낮은 전송 지연  | 높은 전송 지연      |
| 속도    | 아주 빠름     | 상대적으로 느림      |
| 전송 매체 | 시스템 버스    | 유선 케이블/무선 주파수 |
| 연결 관계 | 밀접한 연결    | 느슨한 연결        |
| 거리    | 컴퓨터 안     | LAN, MAN, WAN |

---
##### LAN
- 단일 건물/학교 같은 멀지 않은 거리 내에 구성된 네트워크
- 전송 거리가 가깝기 때문에 지연이 적으며 전송 오류가 날 확률도 적음
- LAN의 예: 와이파이, 사무실 공유 프린터
- 예전에는 속도 (수심 Mbps ~ 수 Gbps)로 LAN/MAN/WAN을 나눴는데 큰 의미가 없음
- 토폴로지 : LAN 환경에서 호스트를 연결하는 방식
---
##### 버스형
- 공유 버스 하나에 여러 호스트를 연결하는 구조
- 임의의 호스트가 전송하는 데이터는 모든 호스트에 브로드캐스팅 방식으로 전송함
- 만약 둘 이상의 호스트가 동시에 데이터를 전송하면 데이터 충돌이 발생함
- 충돌 해결 방법 : CSMA/CD(이더넷), CSMA/CA
![[3장. 네트워크 기술-20240425034737797.webp|300]]

---
##### LAN의 구성 형태
링형 (Cyclic이라고 함)
- 전송망(학계에서는 전달망이라고 함)에서 사용하는 대표적인 구성 형태
- 한쪽 방향으로 전송함(오류 발생 시 반시계 방향으로 전송 될 수 있음)

토큰링 형
- 이더넷이 확산되기 전에 활용했던 구조
- 토큰이라는 제어 프레임을 사용해 충돌 가능성을 차단함
- 네트워크 내에 토큰이 하나만 존재하여 특정 시간에 전송할 수 있는 호스트는 하나 뿐임
- 링 형을 모든 호스트를 순환하도록 설계가 되어서 모든 호스트가 동등한 기회를 가짐
---
##### MAN의 구성형태
- LAN 보다 큰 도시 규모의 네트워크 연결
- DQDB(분산 큐 이중 버스)형
- IEEE 802.6: LAN을 위한 FDDI(광섬유 분산 데이터 접속 방식) 표준을 개선
- 보통 반경 25 km 이내에 있는 LAN들을 상호 연결하기 위해 사용
- 이중 버스 구조를 양쪽 시작 부분에 슬롯 생성기가 있음
- LAN A는 버스 A에서 버스 B에 대한 전송 예약을 할 때 1 번째로 예약하고 자신의 데이터를 실어서 보냄
- L2 헤더 크기: 53바이트 = 48 + 5 (추가)
---
##### WAN의 구성 형태
- 국가 이상의 먼 지역으로 원거리 LAN을 지원하는 광역 네트워크 연결
- LAN/MAN은 공유 버스 형의 구성으로 브로드캐스틩을 지원하여 라우팅이 필요 없지만,
- WAN은 전송 매체의 길이가 길어져서 중개 (라우팅)가 반드시 필요함
- 원거리 전송이라 물리적으로 고속 전송이 어려음
- ISP 업체 (예, KT)를 통해서 WAN 관리
	- 전용회선 → SD-WAN (가상화 기반 광역 네트워크 연결 기술) 으로 발전
	- 교환회선
---
##### 인터네트워킹
- 서로 다른 MAN/WAN을 G/W를 통해 연결하는 기능, 네트워크 차이를 분석해 전송 데이터를 중재해야 하고 프로토콜이 다르거나 전송 매체의 특성이 다르면 변환해야 함
- 라우터Router
	- L3 까지 데이터 전송 중개함
	- 여러 포트를 사용해 다수의 LAN을 연결함
- 리피터Repeater
	- L1 에서 단순한 신호 증폭/변환
- 브리지Bridge
	- L1 + L2 중재: 다른 LAN을 연결할 수 있음
![[3장. 네트워크 기술-20240425035204676.webp|300]]
---
### 브리지
- 브리지 좌우에 LAN의 종류가 같거나 다를 수 있음
- 다를 경우는 수신쪽 LAN의 헤더 정보를 추가해야 함
- L2 헤더를 변환하는 기능 필요
	- LLC: 상위 서브 계층
	- MAC: 하위 서브 계층
![[3장. 네트워크 기술-20240425035243464.webp|450]]
---
### 투명 브리지
- 라우팅 과정은 자동으로 수행함
- 송신/수신 호스트가 동일한 방향이면 무시함
- 송신/수신 호스트가 다른 방향이면 중개함
![[3장. 네트워크 기술-20240425035332110.webp|400]]
##### 라우팅 테이블
- 초기에는 라우팅 테이블이 비워져 있어서, 어떤 방향으로 안내해야 할지 모름
- 플러딩 알고리즘 (역방향 학습)으로 라우팅 테이블 누적 갱신
- 플러딩알고리즘: 프레임이 들어온 방향을 제외하고 모든 방향으로 전달됨
- 모든 프레임이 들어온 쪽 포트 정보를 알 수 있음
![[3장. 네트워크 기술-20240425035418519.webp|450]]
---
LAN2의 호스트 c가 LAN4로 이동한 후 브리지 B1, B2의 라루팅 테이블
![[3장. 네트워크 기술-20240425035448627.webp|450]]
![[3장. 네트워크 기술-20240425035502720.webp|450]]

---
 - 링 형 토폴로지에서의 플러딩 알고리즘 문제점 (브리지 루프로 브로드캐스트 폭풍 발생)
 - 목적지를 찾지 못하고 계속 순환함
 - 이중 경로가 존재하지 않게 네트워크 구조를 설계해야 하는데 용이하지 않음
 - 논리적으로 비순환형태로 간주하는 스패닝 트리 알고리즘 (루프 환 방지를 위한 트리 기반 그래프)을 활용함
![[3장. 네트워크 기술-20240425035542328.webp|400]]
---
### 소스 라우팅 브리지
- 송신 측에서 수신 측까지 가는 모든 경로를 패킷 헤더에 넣어 보내는 방식
	- 링 형 토폴로지에 주로 사용함
	- 패킷에 넣은 정보량의 제한 때문에 확장성에 제약이 있음
---
### IP 인터네트워킹
- 인터넷에 연결된 모든 시스템은 IP 프로토콜을 지원해야 함
- 라우팅 기능 필요
	- 헤더 변환: 이더넷 ↔ PPP, PPP ↔ ATM
	- 목적지 경로 선택
![[3장. 네트워크 기술-20240425035651193.webp|400]]
![[3장. 네트워크 기술-20240425035703031.webp|400]]

---
### 인터넷 라우팅
- 고정 경로 배정
	- 송수신 호스트 사이에 고정불변의 경로를 배정함
	- 간단하고 효율적임
	- R1: Net.1이 연결된 포트 1에 L1, L2 인터페이스를 지원함
	- R1: Net.2가 연결된 포트 3에 L1, L2 인터페이스를 지원함
![[3장. 네트워크 기술-20240425035734627.webp|400]]
![[3장. 네트워크 기술-20240425035749460.webp|600]]
![[3장. 네트워크 기술-20240425035812075.webp|600]]

---
##### 적응 경로 배정
- 고정 경로 방식에서 라우팅 테이블의 경로 정보가 **변경되는 경우만 가능**
##### 적응 경로 배정에 영향을 주는 요소
- 특정 네트워크나 **라우터(H/W)** 가 정상적으로 동작하지 않는 경우
- 네트워크의 특정 위치에 혼잡이 발생하는 경우
##### 적응 경로 배정의 단점
- **실시간 네트워크 상태 파악이 불가능함**
- 특정 위치에 **변화가 발생하면 라우터끼리 정보 불일치성 현상 발생**
- 복잡한 경로 설정은 라우터의 부담이 증가함
##### 자율 시스템
- 동일한 **내부 게이트웨이 프로토콜**을 사용해 정보를 교환하는 논리적인 단일 구성체
	- 예. 대전대학교
- IGP 예 : RIP(L7), OSPF(L2)
- 자율 시스템간 사용하는 라우팅인 **외부 게이트웨이 프로토콜**을 이용해 연결됨
- EGP 예: **BGP (L7)**
---
### 서비스 품질
- 소비자가 인지하는 품질, 특정 응용 서비스 사용에 만족하는 정도
- QoS 매개변수 : QoS를 나타내느 다양한 척도
- 연결 설정 지연: 서비스 프리미티브 (Request → Indication & Response → Confirm) 경과 시간
- 연결 설정 실패 확률: 최대 연결 설정 지연 시간 내에 연결 설정이 이루어지지 않을 확률
- 전송률: 초당 전송할 수 있는 비트 수 (bits/second, bps)
- 전송 지연: 송신 호스트가 전송한 데이터가 수신 호스트에 도착할 때까지 경과한 시간
- 전송 오류율: 비트 오류율이라고도 함, 전송된 총 비트 당 오류 비율 (수신된 비트 중 오류 비트 수 / 송신한 총 비트 수)
- 우선 순위: 다른 데이터 전송보다 먼저 처리함, 서비스 클래스에 따라 우선 순위가 다름 (TV > 전화 > 인터넷 → Triple Play)
---
##### 인터넷에서의 QoS
응용 환경에서 실제 데이터 전송 지연이 더 늦음

왜 인터넷에서 지연이 많을까?
- IP 프로토콜이 모든 패킷에 동일한 기준으로 목적지까지 데이터를 라우팅하는데,
- 데이터의 전송 오류를 버퍼를 통해 해결한 후 응용 계층으로 전달해야 함
- 특히, 대용량 실시간 서비스를 제공하려면 약간의 시간을 미리 확보하는 작업 (버퍼에 저장하는 작업)이 요구됨
