# 전송 계층의 기능

**L2, L4 프로토콜 비교**
- **L2**: 물리적, 중계 필요 X
- **L4**: 논리적

**네트워크 = 잠재적 기억장치**
- 네트워크 자체가 기억 장치를 통해 데이터 일관성 유지
- 시간 지연 현상 자체를 데이터를 보관하는 효과를 주기 때문에 네트워크 자체가 논리적인 기억장치

## 흐름제어
**"Flow Control"**
- L2에서도 프레임 전송 과정에 흐름 제어를 수행함
- But, L4에서의 논리적 연결 수가 훨신 많음 -> 다른 버퍼 관리법 요구
- 수신 프로세스의 속도가 송신 프로세스보다 느림 -> 버퍼 용량 초과 -> 데이터 분실 가능
- 수신 호스트에서 슬라이딩 프로토콜 윈도우 개수를 조절해 보낼 수 있는 패킷 한계 지정 가능
## 오류제어
**"Error Control"**
- 데이터 변형과 분실이 있는데, 재전송으로 오류 복구 절차 시행됨
- 수신 프로세스의 요구 or 송신 프로세스의 판단하에 실행
- L4에서는 대부분이 소프트웨어 오류
- 네트워크 계층의 기능적 한계 or 잘못된 목적지가 원인
## 분할 · 병합
- 데이터 전송 전, 적합한 크기로 나누거나 전송 받은 후 원래 크기로 모으는 과정
- 상위 계층으로 데이터를 보낼땐 병합이 필수
## 설계시 고려사항

**주소 표현**
- **TSAP** "Transport Service Access Point": 전송 계층의 주소를 부르는 일반적 용어
- 구조적 or 비구조적으로 표현
	- 구조적) 도메인 주소(URL)은 위치 정보 제공 (절대적인 느낌)
		- 대한민국:대전:대전대학교:컴퓨터공학과:융합과학관:홍길동:==50== <- 포트번호
	- 비구조적) 초등학교 학생의 번호 (상대적인 느낌)

**멀티 플랙싱**
- 하나의 통신채널로 둘 이상의 데이터를 전송하는데 사용하는 기술
- **TPUD** "Transport Protocol Data Unit": 전송 데이터 단위
- TPUD의 목적지가 동일하면, 하나의 가상 회선으로 전송하는게 유리
- **상방향 멀티 플렉싱**: **다수의 전송 계층 연결 포트**에 **하나의 네트워크 회선**
- **하방향 멀티 플렉싱**: **하나의 전송 연결 포트**에 **다수의 가상 회선**

**연결 설정**
- 개념적인 2단계 설정 과정 <- 최소한의 단계
- 연결 설정은 양쪽 합의가 있어야함
	- A (Conn_Req)-> B
	- A <-(Conn_Ack) B
- 프리미티브 전송 과정중 분실, 변형 가능성으로 이를 고려한 3단계 동작과정 요구
- 이론적으론 연결 설정 모든 구간에서 오류 가능성이 있음으로 무한 ACK를 보내야함
	- A (Conn_Req)-> B
	- A <-(Conn_Ack) B
	- A (Conn_Ack_Ack)-> B
- 실제 3단계 연결 설정
- x에 대한 Ack를 보내며 전송할 데이터 y를 보냄
- 만약 A프로세스에서 보낼 데이터가 없다면
- Conn_Ack_Ack를 전송
	- A (Conn_Req(x))-> B
	- A <-(Conn_Ack(y, x)) B
	- A (Data_Req(x, y))-> B
		- Data_Req == Conn_Ack_Ack

**연결 해제**
- **일방적 연결 해제**: Disc_Req를 전송해 연결 종료 선언 <- 상대 동의 필요 없음
	- 전송 지원하는 원통 기능 정지로 남은 데이터 전송 처리 문제 발생
- **점진적 연결 해제**: 하나의 연결에 2개의 단방향 원통
	- 하나의 원통이 연결 해제되어도, 다른 원통은 정상 수행
	- 연결 해제 시 양쪽으로 Disc_Req 보내야함
***
# TCP의 헤더 구조
***
# TCP의 동작 원리