프로그램과 데이터는 직접 실행되거나 참조되기 위하여 주기억장치 내에 존재해야 함
- 각 프로세스는 메모리 공간에 저장됨
- 
- **다수 프로세스들을 위한 주기억장치의 효율적인 관리가 필요**
---
### 주소 바인딩 개념
정의
- 이진파일의 형태로 디스크에 저장되어 있는 프로그램 -> 주기억장치 적재(로드)
- **논리적 주소(logical address)를 가진 프로그램이 주기억장치에 적재될 실제 물리적 주소(physical address)로 사상(mapping)되는 것을 의미함**

주소 바인딩 종류
- 컴파일 시간 바인딩
- **적재 시간 바인딩**
- 실행 시간 바인딩
- --
##### 컴파일 시간 바인딩
- 프로세스가 적재될 주기억장치의 위치(주소)를 미리 아는 경우, _컴파일러가 절대코드(물리적 주소를 가진 이진코드)를 생성함_
##### 로드 시간 바인딩
- 프로세스가 적재될 위치(주소)를 컴파일러가 알지 못하는 경우, _컴파일러는 일단 이진코드를 재배치 가능하게 생성함_
- 물리적 주소로의 주소 바인딩은 프로그램이 기억장치에 적재되는 시간에 적재기(loader)에 의해 수행됨
##### 행 시간 바인딩
- **프로세스가 실행되는 시점에 주소 바인딩이 이루어짐**

###### 참고  
bootloader
- 시스템의 하드웨어를 초기화하고 운영체제의 커널을 메모리에 올려 실행시키는 프로그램
---
##### 논리적 주소와 물리적 주소
- 논리적 주소는 _중앙처리장치가 생성하여 관리하는 주소_, **가상주소라고도 부름**
- 물리적 주소는 _메모리의 실제 주소_, _기억장치가 관리하는 주소_ 를 의미
- 기억장치 관리기
	- 논리적 주소를 물리적 주소로 변환하는 역할 수행
![[운영체제 3-20240417192358964.webp|400]]
##### 기억장치의 계층적 구조
![[운영체제 3-20240417192446261.webp|400]]

---
### 기억장치의 계층 구조 및 관리 기법
- MMU(Memory Management Unit)의 기억장치 관리
	- 기억장치 자원을 **효율적**으로 사용
	- 반입 기법, 배치 기법, 교체 기법
---
##### 반입 기법
- **주기억장치에 적재할 다음 프로그램이나 데이터를 언제 가져올 것인가 결정**
- 요구반입 기법과 예상반입 기법이 있음
##### 배치 기법
- 새로 반입된 데이터나 프로그램을 주기억장치의 어디에 위치시킬 것인가 결정
- _최초적합(first-fit)_, _최적적합(best-fit)_ 및 _최악적합(worst-fit)_ 기법이 있음
##### 교체 기법
- 새로 들어온 프로그램이 들어갈 장소를 마련하기 위해서 어떤 프로그램 및 데이터를 제거할 것인가를 결정
---
### **단일 사용자 연속 기억장치** 할당 (자원 낭비가 많음)
- 초기 컴퓨터 -> 임의의 시간에 한 사용자만이 시스템 사용 -> 아주 간단한 기억장치 할당
- **오버레이 기법**을 이용하여 주기억장치보다 더 큰 프로그램도 실행 가능
	- 큰 프로그램을 몇 개의 조각으로 분할, 프로그램이 시작되면 각 단계별로 차례로 적재하여 실행, 여러 단계를 거치면서 커다란 프로그램을 실행하는 방법
	- 프로그램의 한 부분이 더 이상 실행에 필요 없는 경우 다른 프로그램을 보조기억장치로부터 옮겨와서 필요 없는 프로그램이 사용하던 기억장치를 차지하게 함
##### 시스템 보호 방법 (운영 체제 보호)
- 사용자 프로그램이 운영체제 영역을 침범하지 못하게 함
- 중앙처리장치 내에 하나의 **경계 레지스터**를 이용
![[운영체제 3-20240417193044666.webp|350]]
---
### **고정 분할 기억장치** 할당
- **주기억장치를 일정 수의 고정된 크기들로 분할하여 여러 프로세스에게 할당하는 방법**
- **초기의 다중 프로그래밍 시스템에서 활용**
- 고정 분할 기억장치에 작업(프로그램) 할당 방법
	- 절대 번역 및 로딩 방법: 컴파일 시에 정해진 주소의 메모리 로딩
	- 재배치 가능 번역 및 로딩 방법: 로딩시에 배치되는 주소의 메모리에 로딩
##### 시스템 보호 방법
- 임의의 한 분할에 있는 프로그램과 데이터를 다른 분할에 있는 프로그램으로부터 보호해야 함
- **여러 개의 경계 레지스터(bound register)를 이용하여 다른 프로그램을 보호함**
![[운영체제 3-20240417193353647.webp|400]]
- _기억장치의 단편화_ 현상 발생
	- **내부 단편화**(internal fragmentation): 어떤 분할이 사용되었으나, 사용된 분할의 일부는 사용되고 다른 일부는 남았을 때 발생
	- **외부 단편화**(external fragmentation): 어떤 분할이 사용되지 않고 이용 가능하지만 대기 중인 작업에게는 너무 작아서 사용할 수 없을 때 발생
- **단편화 문제를 줄이기 위하여 합리적인 메모리의 고정 분할 크기를 결정하는 것은 어려운 문제임 (다양한 프로그램 내용에 따라 프로그램 크기가 변화하기때문)**
![[운영체제 3-20240417195552298.webp|400]]
**전체 18K의 메모리가 사용되지 않고 있으나, 작업4 (13K)를 수행할 수 없음**

---
### **가변 분할 기억장치 할당** 방법
- **기억장치 단편화 문제를 해결하기 위하여 고정된 분할의 개념을 없애고 각작업(프로그램)에 필요한 만큼의 기억 장치를 동적으로 할당하는 방법**

- 가변 분할 기억장치 할당 방법의 **문제**
	- 구동초기에는 별다른 기억장치 낭비 없음
	- **But, 작업이 대하여 메모리의 할당과 해제를 반복하는 경우에 기억장치 단편화의 문제가 심화될 가능성이 높음**
![[운영체제 3-20240417195841447.webp|450]]

##### 가변 분할 기억장치 할당에서 **기억공간의 효율화 방법**
1. 공백 합병
	- 인접한 공백들을 결합하여 하나의 큰 기억 공간으로 만듬
2. 기억장소 집약
	- 존재하는 여러 개의 작은 공백들을 하나의 커다란 기억 공간으로 통합
	- **"쓰레기 수집"**이라고 부름
	- 문제점
		- 집약이 실행되는 동안 **모든 일을 중지**해야 함
		- 잦은 기억장소 집약을 수행하는데 필요한 시스템의 자원들의 소모가 기억장소 **집약으로 얻는 이익보다 더 커질 수 있음**
##### 가변 분할 기억장치 할당에서 **기억 장치 배치 기법**
- 입력되는 프로그램과 데이터를 주기억장치의 **어느 곳에 배치할 것인가**를 결정
- _최초적합(first-fit) 기법, 최적적합(best-fit) 기법, 최악적합(worst-fit) 기법_

1. 최초 적합 기법
	- 주기억장치의 첫 번째 유용한 공백을 우선적으로 선택 (널리 사용됨)
2. 최적 적합 기법
	- 기억장치의 단편화를 최소로 하는 방법
	- 적재 가능한 가용 공간 중 가장 작은 공백이 남는 분할에 할당
3. 최악 적합 기법
	- 적재 가능한 가용 공간 중 가장 큰 공간에 할당
	- 할당 후에도 활용할 수 있는 가용 공간이 남아 있음
---
### **기억장치 교체(Swapping)**
- **하나의 작업이 전체 기억장치를 사용한 후, 필요에 따라 그 작업은 제거(swap out)되고 다시 다음 작업이 적재(swap in)되는 순으로 수행**
- **페이징 시스템의 기초**가 됨
![[운영체제 3-20240417200555153.webp|400]]
---
## 요약
##### 주소 바인딩
- 논리적 주소의 물리적 주소로의 매핑
##### 기억장치의 계층 구조
- 보조기억장치, 주기억장치, 캐시기억장치, 레지스터
##### 기억장치 관리를 위한 기법
- 반입 기법, **배치 기법, 교체 기법**
##### 단일 사용자 연속 기억장치 할당 방법
##### 고정 분할 기억장치 할당 방법
##### 가변 분할 기억장치 할당 방법

